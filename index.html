<!DOCTYPE html>
<html>

<head>
	<script src="./jquery-3.4.1.slim.min.js"></script>
	<script type="text/javascript" src="./app.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js"></script>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>The Ultimate Pacman</title>
	<link rel="stylesheet" href="./index.css" />
	<style>
		* {
			margin: 0;
			padding: 0;
		}
	</style>
</head>

<body>
	<div>
		<!-- Header-->
		<div class="header">
			<h1>
				<img class="logo" src="https://images.all-free-download.com/images/graphiclarge/pacman_56054.jpg" width="50" height="30"
				 style=" padding-top:20px; padding-left: 10px;" />
				<span class="alt-logo">The Ultimate Pacman</span>
			</h1>
		</div>

		<!-- Menu -->
		<div class="scrollmenu">
			<button class="nav" value="welcome" href="#home">Welcome</button>
			<button class="nav" value="login" href="#login">Login</button>
			<button class="nav" value="register" href="#register">Register</button>
			<button class="nav" value="game" href="#about">About</button>
		</div>

		<div class="content">
			<!-- Welcome content-->
			<div class="welcome_content">
				<section class="container">
					<article class="half">
						<div class="tabs">
							<span class="tab signin active">
								<a>Sign in</a>
							</span>
							<span class="tab signup">
								<a>Sign up</a>
							</span>
						</div>
						<div class="content">
							<div class="signin-cont cont">
								<form action="#" name="signin" method="post" enctype="multipart/form-data">

									<input type="name" name="username_signin" id="username_signin" class="inpt" placeholder="Your username">
									<label for="username">Your username</label>

									<input type="password" name="password_signin" id="password_signin" class="inpt" placeholder="Your password">
									<label for="password">Your password</label>

									<div class="submit-wrap">
										<input type="submit" value="Sign in" class="submit">
									</div>
								</form>
							</div>
							<div class="signup-cont cont">
								<form action="#" name="signup" method="post" enctype="multipart/form-data">

									<input type="name" name="first" id="first" class="inpt" placeholder="Your first name">
									<label for="name">Your first name</label>

									<input type="name" name="last" id="last" class="inpt" placeholder="Your last name">
									<label for="name">Your last name</label>

									<input type="date" name="birth" id="birth" class="inpt" placeholder="Your date of birth">
									<label for="name">Your date of birth</label>

									<input type="name" name="username" id="username" class="inpt" placeholder="Your username">
									<label for="name">Your username</label>

									<input type="email" name="email" id="email" class="inpt" placeholder="Your email">
									<label for="email">Your email</label>

									<input type="password" name="password" id="password" class="inpt" placeholder="Your password">
									<label for="password">Your password</label>

									<div class="submit-wrap">
										<input type="submit" value="Sign Up" class="submit">
									</div>
								</form>
							</div>
						</div>
					</article>
				</section>

			</div>


			<!-- Login content-->
			<div class="login_content" style="display:none;">

				Login
			</div>

			<!-- Register content-->
			<div class="register_content" style="display:none;">
				Register

			</div>

			<!-- About content-->
			<div class="about_content" style="display:none;">
				About

			</div>

			<!-- About content-->
			<div class="options_content" style="display:none;">
				options

			</div>

			<!-- Game content-->
			<div class="game_content" style="display:none;">
				<div id="score" class="game_test">
					<label for="lblScore">SCORE:</label>
					<input id="lblScore" type="text" />
				</div>

				<div id="time">
					<label for="lblTime">TIME:</label>
					<input id="lblTime" type="text" />
				</div>

				<div id="game">
					<canvas id="canvas" height="750" width="1000"></canvas>
				</div>
			</div>
		</div>

	</div>
	</div>

	<script>
		$("div.welcome_content").toggle(!localStorage.getItem('signed_in'));
		$("div.options_content").toggle(localStorage.getItem('signed_in'));

		const default_users = [{ username: 'p', password: 'p' }]
		const contents = ['welcome', 'login', 'register', 'about', 'options', 'game']
		$("button.nav").click(function () {
			contents.forEach(content => $(this).val() === content ? $('div.' + $(this).val() + '_content').show() : $('div.' + content + '_content').hide())
		});
		$('.tabs .tab').click(function () {
			if ($(this).hasClass('signin')) {
				$('.tabs .tab').removeClass('active');
				$(this).addClass('active');
				$('.cont').hide();
				$('.signin-cont').show();
			}
			if ($(this).hasClass('signup')) {
				$('.tabs .tab').removeClass('active');
				$(this).addClass('active');
				$('.cont').hide();
				$('.signup-cont').show();
			}
		});
		$('.container .bg').mousemove(function (e) {
			var amountMovedX = (e.pageX * -1 / 30);
			var amountMovedY = (e.pageY * -1 / 9);
			$(this).css('background-position', amountMovedX + 'px ' + amountMovedY + 'px');
		});

		$("form").submit(function (event) {
			if (localStorage.getItem('signed_in')) {
				alert("Already signed in")
				event.preventDefault();
			}

			var values = $(this).serializeArray();
			default_users.forEach(user => {
				if (user['username'] === values[0]['value'] &&
					user['password'] === values[1]['value']
				) {
					localStorage.setItem('signed_in', true);
					console.log(values[1]['value'])

					return;
				}
			})
		});

		$.validator.addMethod("namecheck", function (value) {
			return /^[A-Za-z]*$/.test(value) // consists of only these
		});

		$.validator.addMethod("passwordcheck", function (value) {
			return /^[A-Za-z0-9\d=!\-@._*]*$/.test(value) // consists of only these
				&& /[a-z]/.test(value) // has a lowercase letter
				&& /\d/.test(value) // has a digit
		});

		// Wait for the DOM to be ready
		$(function () {
			// Initialize form validation on the registration form.
			// It has the name attribute "registration"
			$("form[name='signup']").validate({
				// Specify validation rules
				rules: {
					// The key name on the left side is the name attribute
					// of an input field. Validation rules are defined
					// on the right side
					username: "required",
					birth: "required",
					first: {
						required: true,
						namecheck: true
					},
					last: {
						required: true,
						namecheck: true
					},
					email: {
						required: true,
						// Specify that email should be validated
						// by the built-in "email" rule
						email: true
					},
					password: {
						required: true,
						minlength: 6,
						passwordcheck: true,
					}
				},
				// Specify validation error messages
				messages: {
					username: {
						required: "Please provide a username",
					},
					first: {
						required: "Please provide a first name",
						namecheck: "Please enter valid first name without digits"
					},
					last: {
						required: "Please provide a last name",
						namecheck: "Please enter valid last name without digits",
					},
					birth: {
						required: "Please provide a birth of date",
					},
					password: {
						required: "Please provide a password",
						minlength: "Your password must be at least 6 characters long",
						passwordcheck: "Please provide a valid password with letters and digits",
					},
					email: {
						required: "Please provide an email address",
						email: "Please enter a valid email address"
					},

				},
				// Make sure the form is submitted to the destination defined
				// in the "action" attribute of the form when valid
				submitHandler: function (form) {
					form.submit();
				}
			});
		});

		// Wait for the DOM to be ready
		$(function () {
			// Initialize form validation on the registration form.
			// It has the name attribute "registration"
			$("form[name='signin']").validate({
				// Specify validation rules
				rules: {
					// The key name on the left side is the name attribute
					// of an input field. Validation rules are defined
					// on the right side
					username: "required",

					password: {
						required: true
					}
				},
				// Specify validation error messages
				messages: {
					username: {
						required: "Please provide a username",
					},

					password: {
						required: "Please provide a password",
					},

				},
				// Make sure the form is submitted to the destination defined
				// in the "action" attribute of the form when valid
				submitHandler: function (form) {
					form.submit();
				}
			});
		});


	</script>
</body>

</html>